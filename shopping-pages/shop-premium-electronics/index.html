<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechStore - Premium Electronics</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">TechStore</div>
        <div class="search-bar">
            <input type="text" placeholder="Search products...">
        </div>
        <div class="header-actions">
            <span>üë§ Account</span>
            <span>üõí Cart (0)</span>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <h3>Categories</h3>
            <ul>
                <li class="active">All Products</li>
                <li>Smartphones</li>
                <li>Laptops</li>
                <li>Audio</li>
                <li>Wearables</li>
                <li>Accessories</li>
            </ul>
            <div class="filters">
                <h3>Price Range</h3>
                <label><input type="checkbox"> Under $200</label>
                <label><input type="checkbox"> $200 - $500</label>
                <label><input type="checkbox"> $500 - $1000</label>
                <label><input type="checkbox"> Over $1000</label>
            </div>
        </aside>

        <main id="products-container"></main>
    </div>
    <script>
        const API_URL = 'http://localhost:8001/api';
        
        fetch(`${API_URL}/products`)
            .then(r => r.json())
            .then(products => {
                const container = document.getElementById('products-container');
                products.forEach(product => {
                    const row = document.createElement('div');
                    row.className = 'product-row';
                    const stockStatus = product.stock > 50 ? 'In Stock' : product.stock > 0 ? `Only ${product.stock} left` : 'Out of Stock';
                    const stockClass = product.stock > 50 ? 'high' : product.stock > 0 ? 'low' : 'out';
                    row.innerHTML = `
                        <div class="product-image">${product.image}</div>
                        <div class="product-info">
                            <h2>${product.name}</h2>
                            <p class="category">${product.category}</p>
                            <p class="description">${product.description}</p>
                            <div class="specs">
                                <span class="stock-badge ${stockClass}">üì¶ ${stockStatus}</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <div class="price">$${product.price.toFixed(2)}</div>
                            <button class="add-cart" ${product.stock === 0 ? 'disabled' : ''}>
                                ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                            </button>
                            <button class="view-details">View Details</button>
                        </div>
                    `;
                    container.appendChild(row);
                });
            })
            .catch(err => {
                document.getElementById('products-container').innerHTML = 
                    '<p style="color: #e74c3c; padding: 2rem;">‚ö†Ô∏è Backend not running. Start it with: ./launch.py backend</p>';
            });
    </script>
</body>
</html>
